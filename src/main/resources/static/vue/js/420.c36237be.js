"use strict";(self["webpackChunkxy_dash_admin"]=self["webpackChunkxy_dash_admin"]||[]).push([[420],{8420:function(e,a,l){l.r(a),l.d(a,{default:function(){return v}});l(7658);var t=l(3396),u=l(4870),n=l(7412),o=l(1120);const d=e=>((0,t.dD)("data-v-0667081c"),e=e(),(0,t.Cn)(),e),i=["onClick"],r=d((()=>(0,t._)("span",{style:{"font-size":"larger"}},"您确定要删除这条记录吗？",-1))),p={class:"dialog-footer"},s={class:"dialog-footer"};var m={__name:"index",setup(e){const a=(0,u.iH)(0),l=(0,u.iH)(null),d=(0,u.iH)(null),m=((0,u.iH)(-1),(0,u.iH)([])),c=(0,u.iH)(!1),w=(0,u.iH)(!1),v=((0,u.iH)(-1),e=>{o.Z.push({path:window.location.pathname+"/details",query:{id:e}})}),f=async()=>{const e=await n.ZP.get("admin_api/v1/migrationCodeOperations",k.value);l.value=e.data.data.records,a.value=e.data.data.total},_=async()=>{const e=await n.ZP.get("admin_api/v1/migrationCodes/list");m.value=e.data.data};_();const g=e=>{k.value.current=1,k.value.size=e,f()},W=e=>"0"==e.status?"运行失败":"1"==e.status?"运行成功":"2"==e.status?"开始执行":"3"==e.status?"生成jar":"4"==e.status?"运行中":void 0,b=e=>{k.value.current=e,f()},k=(0,u.iH)({name:"",current:1,size:10});return f(),(e,u)=>{const n=(0,t.up)("el-option"),o=(0,t.up)("el-select"),_=(0,t.up)("el-button"),y=(0,t.up)("el-col"),h=(0,t.up)("el-form-item"),C=(0,t.up)("el-form"),V=(0,t.up)("el-row"),z=(0,t.up)("el-table-column"),H=(0,t.up)("el-table"),U=(0,t.up)("el-pagination"),x=(0,t.up)("el-dialog"),P=(0,t.up)("el-input");return(0,t.wg)(),(0,t.iD)(t.HY,null,[(0,t.Wm)(V,{gutter:20,class:"header"},{default:(0,t.w5)((()=>[(0,t.Wm)(y,{span:9},{default:(0,t.w5)((()=>[(0,t.Wm)(C,{"label-width":"120px"},{default:(0,t.w5)((()=>[(0,t.Wm)(h,{label:"文件名称:"},{default:(0,t.w5)((()=>[(0,t.Wm)(o,{class:"m-2",modelValue:k.value.codeId,"onUpdate:modelValue":u[0]||(u[0]=e=>k.value.codeId=e),"popper-append-to-body":!0,clearable:""},{default:(0,t.w5)((()=>[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(m.value,(e=>((0,t.wg)(),(0,t.j4)(n,{key:e.id,label:e.fileName,value:e.id},null,8,["label","value"])))),128))])),_:1},8,["modelValue"]),(0,t.Wm)(y,{span:1},{default:(0,t.w5)((()=>[(0,t.Wm)(_,{type:"primary",onClick:f},{default:(0,t.w5)((()=>[(0,t.Uk)("搜索")])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})])),_:1}),(0,t.Wm)(H,{data:l.value,stripe:"",style:{width:"100%"}},{default:(0,t.w5)((()=>[(0,t.Wm)(z,{prop:"fileName",label:"文件名称",align:"center"}),(0,t.Wm)(z,{prop:"status",label:"状态",formatter:W,align:"center"}),(0,t.Wm)(z,{prop:"remark",label:"备注",align:"center"}),(0,t.Wm)(z,{prop:"createdTime",label:"创建时间",align:"center"}),(0,t.Wm)(z,{prop:"creater",label:"创建人",align:"center"}),(0,t.Wm)(z,{prop:"data",label:"操作",align:"center"},{default:(0,t.w5)((e=>[(0,t._)("span",{class:"text",onClick:a=>v(e.row.id)},"详情",8,i)])),_:1})])),_:1},8,["data"]),(0,t.Wm)(U,{currentPage:k.value.current,"onUpdate:currentPage":u[1]||(u[1]=e=>k.value.current=e),"page-size":k.value.size,"onUpdate:page-size":u[2]||(u[2]=e=>k.value.size=e),"page-sizes":[10,20,30,40,50],layout:"total, sizes, prev, pager, next, jumper",total:a.value,onSizeChange:g,onCurrentChange:b},null,8,["currentPage","page-size","total"]),(0,t.Wm)(x,{modelValue:c.value,"onUpdate:modelValue":u[5]||(u[5]=e=>c.value=e),title:"提示",width:"30%"},{footer:(0,t.w5)((()=>[(0,t._)("span",p,[(0,t.Wm)(_,{onClick:u[3]||(u[3]=e=>c.value=!1)},{default:(0,t.w5)((()=>[(0,t.Uk)("取消")])),_:1}),(0,t.Wm)(_,{type:"primary",onClick:u[4]||(u[4]=a=>e.deleteById())},{default:(0,t.w5)((()=>[(0,t.Uk)(" 确认 ")])),_:1})])])),default:(0,t.w5)((()=>[r])),_:1},8,["modelValue"]),(0,t.Wm)(x,{modelValue:w.value,"onUpdate:modelValue":u[9]||(u[9]=e=>w.value=e),title:"运行代码",width:"20%"},{footer:(0,t.w5)((()=>[(0,t._)("span",s,[(0,t.Wm)(_,{onClick:u[7]||(u[7]=a=>e.code=!1)},{default:(0,t.w5)((()=>[(0,t.Uk)("取消")])),_:1}),(0,t.Wm)(_,{type:"primary",onClick:u[8]||(u[8]=a=>e.run())},{default:(0,t.w5)((()=>[(0,t.Uk)(" 确认 ")])),_:1})])])),default:(0,t.w5)((()=>[(0,t.Wm)(C,{"label-width":"50px",stripe:"",style:{width:"260px"}},{default:(0,t.w5)((()=>[(0,t.Wm)(h,{label:"备注"},{default:(0,t.w5)((()=>[(0,t.Wm)(P,{modelValue:d.value,"onUpdate:modelValue":u[6]||(u[6]=e=>d.value=e),clearable:""},null,8,["modelValue"])])),_:1})])),_:1})])),_:1},8,["modelValue"])],64)}}},c=l(89);const w=(0,c.Z)(m,[["__scopeId","data-v-0667081c"]]);var v=w}}]);
//# sourceMappingURL=420.c36237be.js.map