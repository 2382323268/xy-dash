{"version":3,"file":"js/628.c88318d5.js","mappings":"uWAmCA,MAAMA,GAAOC,EAAAA,EAAAA,IAAI,CAAC,GACZC,GAAKD,EAAAA,EAAAA,IAAI,MACTE,GAAOF,EAAAA,EAAAA,KAAI,GACXG,GAAOH,EAAAA,EAAAA,IAAI,MACXI,EAAeC,UACnB,MAAMC,GAAQC,EAAAA,EAAAA,MACdN,EAAGO,MAAQF,EAAMG,OAAOR,GACxB,MAAMS,QAAYC,EAAAA,GAAAA,IAChB,wCAA0CV,EAAGO,OAE/CT,EAAKS,MAAQE,EAAIE,KAAKA,IAAI,EAEtBC,EAAMR,UACV,MAAMK,QAAYC,EAAAA,GAAAA,IAChB,wCAA0CV,EAAGO,MAAQ,QAEvDL,EAAKK,MAAQE,EAAIE,KAAKA,KACtBE,IACAZ,EAAKM,OAAQ,CAAI,EAEbM,EAAS,KACb,MAAMJ,EAAMC,EAAAA,GAAAA,IACV,wCAA0CV,EAAGO,MAAQ,QAEvDE,EAAIK,MAAMC,IACJA,EAAOJ,KAAKA,MAAQT,EAAKK,OAAuB,GAAdN,EAAKM,QACzCL,EAAKK,MAAQQ,EAAOJ,KAAKA,KACzBK,YAAW,KACTH,GAAQ,GACP,KACL,GACA,E,OAEJV,I,8lCC9DA,MAAMc,GAA2B,OAAgB,EAAQ,CAAC,CAAC,YAAY,qBAEvE,O","sources":["webpack://xy-dash-admin/./src/views/code/run/details/index.vue","webpack://xy-dash-admin/./src/views/code/run/details/index.vue?9ba2"],"sourcesContent":["<template>\r\n  <el-timeline>\r\n    <el-timeline-item\r\n      v-for=\"(activity, index) in list.migrationCodeOperationHistorysList\"\r\n      :key=\"index\"\r\n      :color=\"activity.color\"\r\n      :timestamp=\"activity.createdTime\"\r\n    >\r\n      <el-card>\r\n        <p>{{ activity.msg }}</p>\r\n        <el-button\r\n          style=\"float: right; padding: 10px; margin: 10px\"\r\n          type=\"primary\"\r\n          @click=\"log\"\r\n          plain\r\n          v-if=\"activity.status == 4\"\r\n          >运行日志</el-button\r\n        >\r\n      </el-card>\r\n    </el-timeline-item>\r\n  </el-timeline>\r\n  <el-dialog v-model=\"show\" width=\"80%\">\r\n    <el-scrollbar height=\"600px\">\r\n      <span v-for=\"v in logs\"> {{ v }} <br /> </span>\r\n    </el-scrollbar>\r\n  </el-dialog>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, watch } from \"vue\";\r\nimport requestUtil from \"@/util/request\";\r\nimport router from \"@/router/index\";\r\nimport { useRoute } from \"vue-router\";\r\nimport { ElMessage } from \"element-plus\";\r\n\r\nconst list = ref({});\r\nconst id = ref(null);\r\nconst show = ref(false);\r\nconst logs = ref(null);\r\nconst initUserList = async () => {\r\n  const route = useRoute();\r\n  id.value = route.params.id;\r\n  const res = await requestUtil.get(\r\n    \"admin_api/v1/migrationCodeOperations/\" + id.value\r\n  );\r\n  list.value = res.data.data;\r\n};\r\nconst log = async () => {\r\n  const res = await requestUtil.get(\r\n    \"admin_api/v1/migrationCodeOperations/\" + id.value + \"/log\"\r\n  );\r\n  logs.value = res.data.data;\r\n  forLog();\r\n  show.value = true;\r\n};\r\nconst forLog = () => {\r\n  const res = requestUtil.get(\r\n    \"admin_api/v1/migrationCodeOperations/\" + id.value + \"/log\"\r\n  );\r\n  res.then((result) => {\r\n    if (result.data.data != logs.value && show.value == true) {\r\n      logs.value = result.data.data;\r\n      setTimeout(() => {\r\n        forLog();\r\n      }, 1000);\r\n    }\r\n  });\r\n};\r\ninitUserList();\r\n</script>\r\n\r\n<style scoped>\r\n.header {\r\n  padding-bottom: 16px;\r\n  box-sizing: border-box;\r\n}\r\n.text {\r\n  cursor: pointer;\r\n  font-size: 0.8rem;\r\n  font-weight: 550;\r\n  background-size: 40px 40px;\r\n  margin: 5px;\r\n  color: #09909f;\r\n}\r\n.m-2 {\r\n  width: 200px;\r\n}\r\n.el-pagination {\r\n  float: right;\r\n  padding: 20px;\r\n  box-sizing: border-box;\r\n}\r\n\r\n::v-deep th.el-table__cell {\r\n  word-break: break-word;\r\n  background-color: #f8f8f9 !important;\r\n  color: #515a6e;\r\n  height: 40px;\r\n  font-size: 13px;\r\n}\r\n\r\n.el-tag--small {\r\n  margin-left: 5px;\r\n}\r\n.ccc {\r\n  background-size: 20px 20px !important;\r\n  width: 20px !important;\r\n  height: 20px !important;\r\n}\r\n</style>\r\n","import script from \"./index.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./index.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./index.vue?vue&type=style&index=0&id=e2925fc8&scoped=true&lang=css\"\n\nimport exportComponent from \"D:\\\\bs\\\\wxw\\\\xy-dash-admin\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-e2925fc8\"]])\n\nexport default __exports__"],"names":["list","ref","id","show","logs","initUserList","async","route","useRoute","value","params","res","requestUtil","data","log","forLog","then","result","setTimeout","__exports__"],"sourceRoot":""}