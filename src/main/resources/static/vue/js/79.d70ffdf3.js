"use strict";(self["webpackChunkxy_dash_admin"]=self["webpackChunkxy_dash_admin"]||[]).push([[79],{2079:function(e,a,l){l.r(a),l.d(a,{default:function(){return y}});l(7658);var i=l(3396),u=l(9242),n=l(2268),t=l(4870),o=l(7412),r=l(7178);const m=e=>((0,i.dD)("data-v-feffbeb8"),e=e(),(0,i.Cn)(),e),s={class:"dialog-footer"},d={class:"dialog-footer"},v=m((()=>(0,i._)("span",{style:{color:"var(--el-text-color-regular)"}},"值",-1))),p=m((()=>(0,i._)("span",null," ",-1))),f={class:"dialog-footer"};var c={__name:"field",props:{migrationsForm:{type:Object,default:null,required:!0}},setup(e,{expose:a}){const l=e,m=((0,t.iH)(null),(0,t.iH)(null)),c=((0,t.iH)([0]),(0,t.iH)(null),(0,t.iH)(!1)),g=(0,t.iH)("设置为指定时间"),T=((0,t.iH)(null),(0,t.iH)([0]),(0,t.iH)(null)),y=(0,t.iH)(null),b=(0,t.iH)([{index:parseInt(1e6*Math.random())}]),h=(0,t.iH)({name:"选择主数据表",list:[]}),w=(0,t.iH)([]),F=(0,t.iH)({}),N=(0,t.iH)([]),j=(0,t.iH)({}),k=(0,t.iH)(!1),L=(0,t.iH)(!1),D=(0,t.iH)(!1),q=(0,t.iH)(!1),_=(0,t.iH)([]);let V=(0,t.iH)({}),W=(0,t.iH)({});const S=["=",">",">=","<","<=","!=","in","notIn","like","likeLeft","likeRight","isNull","isNotNull","notLike"],E=[{type:1,value:"映射"},{type:2,value:"自增"},{type:3,value:"雪花"},{type:4,value:"uuid"}],M=["IntegerToLong","IntegerToFloat","IntegerToDouble","IntegerToBoolean","IntegerToString","IntegerToBigDecimal","LongToInteger","LongToFloat","LongToDouble","LongToBoolean","LongToString","LongToBlob","LongToLocalDate","LongToLocalTime","LongToLocalDateTime","LongToByte","LongToBigDecimal","FloatToInteger","FloatToLong","FloatToDouble","FloatToBoolean","FloatToString","DoubleToInteger","DoubleToLong","DoubleToFloat","DoubleToBoolean","BooleanToInteger","BooleanToLong","BooleanToFloat","BooleanToDouble","BooleanToString","StringToInteger","StringToLong","StringToFloat","StringToDouble","StringToBoolean","StringToBlob","StringToClob","StringToLocalDate","StringToLocalTime","StringToBigDecimal","StringToByte","StringToLocalDateTime","BlobToByte","BlobToString","LocalDateToLong","LocalDateToString","LocalDateToLocalDateTime","LocalTimeToString","LocalTimeToLocalDateTime","LocalDateTimeToLong","LocalDateTimeToString","LocalDateTimeToLocalDate","LocalDateTimeToLocalTime","BigDecimalToInteger","BigDecimalToLong","BigDecimalToFloat","BigDecimalToDouble","BigDecimalToBoolean","BigDecimalToString","ByteToString","ByteToBlob"],B=e=>{e&&_.value.push(e)},H=(e,a)=>{let l=!1;if(null==a.sourceName)return null;let i=null;if(null==a.valueMap?w.value.forEach((e=>{e.name==a.sourceName&&(i=e)})):N.value.forEach((e=>{e.name==a.valueMap[1]&&e.uniqueName==a.valueMap[0]&&e.joinFieldList.forEach((e=>{e.name==a.sourceName&&(i=e)}))})),null==i)return null;if(i.javaType==a.javaType)a.typeConversion=0;else{const e="byte[]"==a.javaType?Byte:a.javaType,u="byte[]"==i.javaType?Byte:i.javaType;M.forEach((a=>{1!=l&&a==u+"To"+e&&(l=!0)})),a.typeConversion=1==l?1:2}a.sourceStatus=i.status,a.sourceRemark=i.remark,a.valueType=i.javaType,a.sourceType=i.type,a.sourceJavaType=i.javaType},Y=e=>["byte[]","Blob","Clob"].indexOf(e.javaType)>-1?0:["LocalDate","LocalTime","LocalDateTime","Year"].indexOf(e.javaType)>-1?1:2,C=e=>{if(null==e)return!0;const a=h.value.list.filter((a=>a.name==e))[0];if(null==a)return!0;let l=a.javaType;return"LocalDateTime"!=l},U=()=>{k.value=!k.value},x=()=>{l.migrationsForm.migrationDataSources.forEach((e=>{null!=e.migrationTables&&e.migrationTables.forEach((e=>{e.random==y.value&&0==e.migration&&e.migrationFields.forEach((e=>{e.fieldName==F.value.joinTable[1].name&&(0==e.status||null==e.status?(e.status=2,c.value=!0,g.value="取消指定时间"):(g.value="设置为指定时间",c.value=!1,e.status=0),w.value.forEach((a=>{a.name==e.fieldName&&(a.status=e.status)})),F.value.joinTable[1].status=e.status,N.value.filter((e=>"选择主数据表"==e.name))[0].joinFieldList.forEach((a=>{a.name==e.fieldName&&(a.status=e.status)})))}))}))}))},I=async e=>{let a=null,i=null;a=null==e?l.migrationsForm.list[0]:e,h.value={name:"选择主数据表",list:[]};let u=a.init;y.value=a.random,null!=a.migrationJoinTables?(a.migrationJoinTables.forEach((e=>{null==e.joinFieldList&&null!=e.dataSourceId&&J(e.dataSourceId,e.name,e.databaseName).then((a=>{e.joinFieldList=a}))})),N.value=a.migrationJoinTables):N.value=[],T.value=await J(a.sourceId,a.name,a.databaseName),w.value=await J(a.sourceIds,a.sourceName,a.sourceDatabaseName),0==N.value.filter((e=>"选择主数据表"==e.name))&&N.value.push({name:"选择主数据表",uniqueName:"1",field:"1",joinFieldList:w.value}),l.migrationsForm.migrationDataSources.forEach((e=>{null!=e.migrationTables&&e.migrationTables.forEach((e=>{e.random==y.value&&(1==e.migration?(null==e.idType&&(e.idType=1),m.value=e.idType,i=e):e.migrationFields.forEach((e=>{w.value.forEach((a=>{a.name==e.fieldName&&(a.status=e.status)})),console.log(e.status),2==e.status&&(c.value=!0,g.value="取消指定时间")})))}))})),T.value.forEach(((e,a)=>{e.defaultValue=Y(e);const l=i.migrationFields.filter((a=>a.fieldName==e.name));if(null==l[0].value||0==l[0].value.trim().length){const a=w.value.filter((a=>a.name==e.name));a.length>0&&1!=u&&(1!=e.status||1==m.value)&&(e.sourceName=e.name)}else e.sourceName=l[0].value;e.defaulted=l[0].defaulted,e.valueMap=l[0].valueMap})),a.init=!0,P(),V.value={lazy:!0,lazyLoad(e,a){const{level:i}=e;setTimeout((()=>{let u=null;if(1==i){const l=e.value.split(";");u=z(l[1],l[0]),u.then((e=>{null==e&&a([]);const l=e.map((e=>({value:e,label:e,leaf:i>=1})));a(l)}))}else{u=l.migrationsForm.migrationDataSources,null==u&&a([]),u=u.filter((e=>"{}"!=JSON.stringify(e))),null==u&&a([]);const e=u.map(((e,a)=>({value:e.databaseName+";"+e.sourceId+";"+e.uniqueName+";"+e.type+";"+a,label:e.databaseName,leaf:i>=1})));0==e.length&&a([]),a(e)}}),10)}}},J=async(e,a,l)=>{const i=await o.ZP.get("admin_api/v1/dataBase/queryField/"+e+"?talbeName="+a+"&databaseName="+l);return i.data.data},z=async(e,a)=>{const l=await o.ZP.get("admin_api/v1/dataBase//queryTable/"+e+"?dataName="+a);return l.data.data},K=({row:e,column:a,rowIndex:l,columnIndex:i})=>{if(k.value){if(0===l&&i>7)return{background:"#eef1f6",color:"#3e3f42"};if(0===l&&i<=7)return{background:"#eef1f6"}}else{if(0===l&&i>1)return{background:"#eef1f6",color:"#3e3f42"};if(0===l&&i<=1)return{background:"#eef1f6"}}},P=()=>{W.value={lazy:!0,lazyLoad(e,a){const{level:l}=e;setTimeout((()=>{let i=null;if(1==l){let u=e.value;i=N.value.filter((e=>e.uniqueName==u.uniqueName&&e.name==u.name&&e.field==u.field)),null==i&&a([]);const n=i[0].joinFieldList.map((e=>({value:e,label:e.name,leaf:l>=1})));a(n)}else{const e=N.value.map(((e,a)=>({value:e,label:"选择主数据表"==e.name?e.name:e.uniqueName+"/"+e.name+"/"+e.field,leaf:l>=1})));0==e.length&&a([]),a(e)}}),10)}}},O=e=>{null!=T.value[e].valueMap&&l.migrationsForm.migrationDataSources.forEach((a=>{null!=a.migrationTables&&(a.migrationTables=a.migrationTables.map((a=>(a.random==y.value&&1==a.migration&&(a.migrationFields=a.migrationFields.map((a=>(a.fieldName==T.value[e].name&&(a.valueMap=null),a))),null!=a.migrationJoinTables&&(a.migrationJoinTables=a.migrationJoinTables.map((a=>(a.joinFiled!=T.value[e].sourceName&&a.name==T.value[e].valueMap[1]&&a.uniqueName==T.value[e].valueMap[0]&&a.field==T.value[e].valueMap[2]&&(a.selectList=a.selectList.filter((a=>a!=T.value[e].sourceName))),a))))),a))))})),T.value[e].defaulted="",T.value[e].sourceName="",T.value[e].sourceType=null,T.value[e].valueType=null,T.value[e].valueMap=null,T.value[e].sourceJavaType=null,T.value[e].typeConversion=null},R=e=>{let a=null;j.value=e,null!=e.sourceName?(a=null==e.valueMap?N.value.filter((e=>"选择主数据表"==e.name)):N.value.filter((a=>a.uniqueName==e.valueMap[0]&&a.name==e.valueMap[1]&&a.field==e.valueMap[2])),F.value.joinTable=[a[0],a[0].joinFieldList.filter((a=>a.name==e.sourceName))[0]]):F.value.joinTable=[],L.value=!0},Z=()=>{D.value=!1,F.value={}},$=()=>{q.value=!1},A=e=>{b.value=b.value.filter((a=>a.index!=e.index))},G=()=>{b.value.push({index:parseInt(1e6*Math.random())})},Q=()=>{let e=!1,a={},i=null,u=null;if(b.value.forEach((l=>{let i=null;if(i="="==l.query?"eq":">"==l.query?"gt":">="==l.query?"ge":"<"==l.query?"lt":"<="==l.query?"le":"!="==l.query?"ne":l.query,a[l.field+"_&"+i]=l.value,0==e&&(null==l.query||null==l.field||null==l.value))return r.z8.error("参数不能为空！"),void(e=!0)})),!e){if(l.migrationsForm.migrationDataSources.forEach((e=>{null!=e.migrationTables&&e.migrationTables.forEach((e=>{e.random==y.value&&(1==e.migration?i=e:u=e)}))})),"选择主数据表"==h.value.name)i.queryMap=a,b.value.forEach((e=>{if(null==e.field||""==e.field)return;const a=u.migrationFields.filter((a=>a.fieldName==e.field));if(0==a.length){const a=h.value.list.filter((a=>a.name==e.field))[0];u.migrationFields.push({fieldName:a.name,fieldType:a.type,remark:a.def,status:a.status})}}));else{const e=h.value.name.split("/");i.migrationJoinTables.forEach((l=>{l.uniqueName==e[0]&&l.name==e[1]&&l.field==e[2]&&(l.queryMap=a)})),l.migrationsForm.migrationDataSources.forEach((a=>{null!=a.migrationTables&&a.uniqueName==e[0]&&a.migrationTables.forEach((a=>{a.name==e[1]&&b.value.forEach((e=>{if(null==e.field||""==e.field)return;const l=a.migrationFields.filter((a=>a.fieldName==e.field));if(0==l.length){const l=h.value.list.filter((a=>a.name==e.field))[0];a.migrationFields.push({fieldName:l.name,fieldType:l.type,remark:l.def,status:l.status})}}))}))}))}q.value=!1}},X=()=>{if(null==F.value.dataSources||null==F.value.query||null==F.value.joinFieldList)return void r.z8.error("参数不能为空！");D.value=!1;let e=null,a=!0,i=F.value.dataSources[1],u=F.value.dataSources[0].split(";")[2];const n=F.value.joinFieldList.filter((e=>e.name==F.value.join));let t={fieldName:n[0].name,fieldType:n[0].type,remark:n[0].remark,status:n[0].status};const o=w.value.filter((e=>e.name==F.value.query));let m={fieldName:o[0].name,fieldType:o[0].type,remark:o[0].remark,status:o[0].status};l.migrationsForm.migrationDataSources.forEach((l=>{null!=l.migrationTables&&(l.migrationTables.forEach((n=>{n.random==y.value&&(1==n.migration?e=n:0==n.migrationFields.filter((e=>e.fieldName==F.value.query)).length&&n.migrationFields.push(m)),l.uniqueName==u&&n.name==i&&(a=!1,0==n.migrationFields.filter((e=>e.fieldName==F.value.join)).length&&n.migrationFields.push(t))})),a&&l.uniqueName==u&&l.migrationTables.push({migration:!1,name:i,type:l.type,migrationFields:[t]}))})),e.migrationJoinTables||(e.migrationJoinTables=[]);let s={field:F.value.query,fieldType:o[0].javaType,joinFiled:F.value.join,selectList:[F.value.join],joinFiledType:n[0].javaType,joinFieldList:F.value.joinFieldList,name:i,uniqueName:u},d=e.migrationJoinTables.filter((e=>e.name==s.name&&e.uniqueName==s.uniqueName&&e.field==s.field));0==d.length?e.migrationJoinTables.push(s):e.migrationJoinTables=e.migrationJoinTables.map((e=>(e.name==s.name&&e.uniqueName==s.uniqueName&&e.field==s.field&&e.selectList.forEach((a=>{a==e.joinFiled&&(a=s.joinFiled)})),e.joinFiled=s.joinFiled,e.joinFiledType=s.joinFiledType,e))),N.value=e.migrationJoinTables,0==N.value.filter((e=>"选择主数据表"==e.name))&&N.value.push({name:"选择主数据表",uniqueName:"1",field:"1",joinFieldList:w.value}),P(),F.value={}},ee=()=>{D.value=!0},ae=()=>{q.value=!0,te()},le=()=>{L.value=!1},ie=()=>{L.value=!1},ue=async(e,a)=>{const l=e[0].split(";");F.value.joinFieldList=await J(l[1],e[1],l[0])},ne=e=>{const a=e[0],i=e[1],u=j.value.valueMap,n=j.value.sourceName;let t=null;l.migrationsForm.migrationDataSources.forEach((e=>{null!=e.migrationTables&&e.migrationTables.forEach((e=>{e.random==y.value&&1==e.migration&&(t=e)}))})),"选择主数据表"!=a.name?j.value.valueMap=[a.uniqueName,a.name,a.field]:j.value.valueMap=null,null!=t.migrationFields&&t.migrationFields.forEach((e=>{e.fieldName==j.value.name&&(e.valueMap="选择主数据表"!=a.name?[a.uniqueName,a.name,a.field]:null)})),j.value.sourceName=i.name,"选择主数据表"!=a.name&&l.migrationsForm.migrationDataSources.forEach((e=>{null!=e.migrationTables&&e.migrationTables.forEach((l=>{e.uniqueName==a.uniqueName&&l.name==a.name&&0==l.migrationFields.filter((e=>e.fieldName==i.name)).length&&l.migrationFields.push({fieldName:i.name,fieldType:i.type,remark:i.remark,status:i.status}),null!=l.migrationJoinTables&&l.migrationJoinTables.forEach((e=>{e.uniqueName==a.uniqueName&&e.name==a.name&&e.field==a.field&&0==e.selectList.filter((e=>e==i.name)).length&&e.selectList.push(i.name),null!=u&&e.name==u[1]&&e.uniqueName==u[0]&&e.field==u[2]&&e.joinFiled!=n&&l.migrationFields.filter((e=>null!=e.valueMap&&e.valueMap.join(", ")==u.join(", ")&&e.value==n)).length<2&&(e.selectList=e.selectList.filter((e=>e!=n)))}))}))}))},te=()=>{b.value=[];let e=null,a=null;if(l.migrationsForm.migrationDataSources.forEach((e=>{null!=e.migrationTables&&e.migrationTables.forEach((e=>{e.random==y.value&&1==e.migration&&(a=e)}))})),"选择主数据表"==h.value.name)h.value.list=w.value,e=a.queryMap;else{const l=h.value.name.split("/");a.migrationJoinTables.forEach((a=>{a.uniqueName==l[0]&&a.name==l[1]&&a.field==l[2]&&(e=a.queryMap,h.value.list=a.joinFieldList)}))}if(null!=e&&"{}"!=JSON.stringify(e))for(let l in e){const a=l.split("_&");let i=null;i="eq"==a[1]?"=":"gt"==a[1]?">":"ge"==a[1]?">=":"lt"==a[1]?"<":"le"==a[1]?"<=":"ne"==a[1]?"!=":a[1];let u=e[l];b.value.push({value:u,index:parseInt(1e6*Math.random()),query:i,field:a[0]})}else b.value=[{}]};return(0,i.YP)(y,((e,a)=>{const i=l.migrationsForm.list.filter((a=>a.random==e))[0];I(i)}),{deep:!0}),(0,i.YP)(b,((e,a)=>{b.value.forEach((e=>{"last"==e.query&&(e.field="")}))}),{deep:!0}),(0,i.YP)(h,((e,a)=>{te()}),{deep:!0}),(0,i.YP)(m,((e,a)=>{m.value>1&&T.value.forEach(((e,a)=>{1==e.status&&O(a)})),l.migrationsForm.migrationDataSources.forEach((e=>{null!=e.migrationTables&&e.migrationTables.forEach((e=>{e.random==y.value&&1==e.migration&&(e.idType=m.value)}))}))}),{deep:!0}),(0,i.YP)(T,((e,a)=>{T.value.forEach(((e,a)=>{H(a,e)})),l.migrationsForm.migrationDataSources.forEach((e=>{null!=e.migrationTables&&e.migrationTables.forEach((e=>{e.random==y.value&&(e.migrationFields||(e.migrationFields=[]),T.value.forEach((a=>{let l=!1,i=null;if(1==e.migration)i={fieldName:a.name,fieldType:a.type,valueType:a.valueType,value:a.sourceName,valueMap:a.valueMap,defaulted:a.defaulted,remark:a.remark,status:a.status};else{if(null==a.sourceName||0==a.sourceName.length||null!=a.valueMap)return;i={fieldName:a.sourceName,fieldType:a.sourceType,remark:a.sourceRemark,status:a.sourceStatus}}e.migrationFields=e.migrationFields.map((e=>e?(e.fieldName==a.name&&null!=i.fieldName&&void 0!=i.fieldName&&(null!=i.value&&void 0!=i.value||(i.value=e.value),null!=i.defaulted&&void 0!=i.defaulted||(i.defaulted=e.defaulted),i.id=e.id,null!=e.valueMap&&(i.valueMap=e.valueMap),null!=e.status&&(i.status=e.status),e=i,l=!0),e):e)),0==l&&null!=i.fieldName&&void 0!=i.fieldName&&0==e.migrationFields.filter((e=>e.fieldName==i.fieldName)).length&&e.migrationFields.push(i)})))}))}))}),{deep:!0}),a({init:I}),(a,l)=>{const o=(0,i.up)("el-option"),r=(0,i.up)("el-select"),_=(0,i.up)("el-col"),M=(0,i.up)("el-button"),H=(0,i.up)("el-row"),Y=(0,i.up)("el-table-column"),I=(0,i.up)("el-table"),J=(0,i.up)("el-form-item"),z=(0,i.up)("el-cascader"),P=(0,i.up)("el-input"),te=(0,i.up)("el-date-picker"),oe=(0,i.up)("el-form"),re=(0,i.up)("el-dialog"),me=(0,i.up)("el-tooltip");return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i.Wm)(H,{span:3},{default:(0,i.w5)((()=>[(0,i.Wm)(_,{span:5},{default:(0,i.w5)((()=>[(0,i.Wm)(r,{modelValue:y.value,"onUpdate:modelValue":l[0]||(l[0]=e=>y.value=e),"popper-append-to-body":!0,class:"m-2"},{default:(0,i.w5)((()=>[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(e.migrationsForm.list,(e=>((0,i.wg)(),(0,i.j4)(o,{key:e.random,label:e.uniqueName+"/"+e.name,value:e.random},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),(0,i.Wm)(M,{type:"primary",onClick:U,plain:""},{default:(0,i.w5)((()=>[(0,i.Uk)("隐藏/显示")])),_:1}),(0,i.Wm)(M,{type:"success",onClick:l[1]||(l[1]=e=>ee()),plain:""},{default:(0,i.w5)((()=>[(0,i.Uk)("添加副数据表")])),_:1}),(0,i.Wm)(M,{type:"success",onClick:l[2]||(l[2]=e=>ae()),plain:""},{default:(0,i.w5)((()=>[(0,i.Uk)("设置查询条件")])),_:1})])),_:1}),(0,i.Wm)(I,{data:T.value,stripe:"",style:{width:"100%"},"header-cell-style":K},{default:(0,i.w5)((()=>[(0,i.Wm)(Y,{type:"selection",width:"55"}),(0,i.Wm)(Y,{label:"字段名称",prop:"name",width:"150",align:"center"}),k.value?((0,i.wg)(),(0,i.j4)(Y,{key:0,label:"字段类型(mysql)",prop:"type",width:"150",align:"center"})):(0,i.kq)("",!0),k.value?((0,i.wg)(),(0,i.j4)(Y,{key:1,label:"字段类型(java)",prop:"javaType",width:"150",align:"center"})):(0,i.kq)("",!0),k.value?((0,i.wg)(),(0,i.j4)(Y,{key:2,label:"数据库默认值",width:"150",prop:"def",align:"center"})):(0,i.kq)("",!0),k.value?((0,i.wg)(),(0,i.j4)(Y,{key:3,label:"字段大小",width:"150",prop:"size",align:"center"})):(0,i.kq)("",!0),k.value?((0,i.wg)(),(0,i.j4)(Y,{key:4,label:"字段描述",width:"150",prop:"remark",align:"center"})):(0,i.kq)("",!0),k.value?((0,i.wg)(),(0,i.j4)(Y,{key:5,label:"是否为空",width:"150",prop:"isNull",align:"center"})):(0,i.kq)("",!0),(0,i.Wm)(Y,{label:"映射字段名称",width:"150",prop:"sourceName",align:"center"}),(0,i.Wm)(Y,{label:"映射字段类型(mysql)",width:"190",prop:"sourceType",align:"center"}),(0,i.Wm)(Y,{label:"映射字段类型(java)",width:"190",prop:"sourceJavaType",align:"center"}),(0,i.Wm)(Y,{label:"映射类型转换",align:"center",width:"170"},{default:(0,i.w5)((e=>[(0,i.wy)((0,i._)("span",null," 无需转换 ",512),[[u.F8,0==e.row.typeConversion]]),(0,i.wy)((0,i._)("span",null," 支持 ",512),[[u.F8,1==e.row.typeConversion]]),(0,i.wy)((0,i._)("span",null," 不支持 ",512),[[u.F8,2==e.row.typeConversion]])])),_:1}),(0,i.Wm)(Y,{label:"映射默认值",align:"center",prop:"defaulted",width:"170"}),(0,i.Wm)(Y,{label:"映射枚举",align:"center"}),(0,i.Wm)(Y,{label:"操作",align:"center",width:"150"},{default:(0,i.w5)((e=>[(0,i.Wm)(M,{type:"primary",size:"small",onClick:a=>R(e.row),plain:""},{default:(0,i.w5)((()=>[(0,i.Uk)("操作")])),_:2},1032,["onClick"]),(0,i.Wm)(M,{type:"danger",size:"small",onClick:a=>O(e.$index),plain:""},{default:(0,i.w5)((()=>[(0,i.Uk)("清空")])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"]),(0,i.Wm)(re,{modelValue:L.value,title:"映射字段",width:"30%",onClose:ie},{footer:(0,i.w5)((()=>[(0,i._)("span",s,[(0,i.wy)((0,i.Wm)(M,{type:"primary",onClick:x},{default:(0,i.w5)((()=>[(0,i.Uk)((0,n.zw)(g.value),1)])),_:1},512),[[u.F8,null!=F.value.joinTable&&2==F.value.joinTable.length&&null!=F.value.joinTable[1]&&"选择主数据表"==F.value.joinTable[0].name&&2==e.migrationsForm.type&&(!c.value||2==F.value.joinTable[1].status)&&1!=F.value.joinTable[1].status&&("Long"==F.value.joinTable[1].javaType||"LocalDateTime"==F.value.joinTable[1].javaType)]]),(0,i.Wm)(M,{type:"primary",onClick:le},{default:(0,i.w5)((()=>[(0,i.Uk)("确认")])),_:1})])])),default:(0,i.w5)((()=>[(0,i.Wm)(oe,{model:j.value,"label-width":"auto"},{default:(0,i.w5)((()=>[(0,i.wy)((0,i.Wm)(J,{label:"id生成策略"},{default:(0,i.w5)((()=>[(0,i.Wm)(r,{modelValue:m.value,"onUpdate:modelValue":l[3]||(l[3]=e=>m.value=e),style:{width:"80px"},placeholder:" "},{default:(0,i.w5)((()=>[((0,i.wg)(),(0,i.iD)(i.HY,null,(0,i.Ko)(E,(e=>(0,i.Wm)(o,{key:e.type,label:e.value,value:e.type},null,8,["label","value"]))),64))])),_:1},8,["modelValue"])])),_:1},512),[[u.F8,1==j.value.status]]),(0,i.wy)((0,i.Wm)(J,{label:"选择映射字段",style:{width:"300px"}},{default:(0,i.w5)((()=>[(0,i.Wm)(z,{modelValue:F.value.joinTable,"onUpdate:modelValue":l[4]||(l[4]=e=>F.value.joinTable=e),props:(0,t.SU)(W),onChange:l[5]||(l[5]=e=>ne(e))},null,8,["modelValue","props"])])),_:1},512),[[u.F8,1!=j.value.status||1==m.value]]),(0,i.wy)((0,i.Wm)(J,{label:"设置默认值",style:{width:"300px",position:"absolute"}},{default:(0,i.w5)((()=>[(0,i.wy)((0,i._)("div",null,[(0,i.Wm)(P,{modelValue:j.value.defaulted,"onUpdate:modelValue":l[6]||(l[6]=e=>j.value.defaulted=e),clearable:""},null,8,["modelValue"])],512),[[u.F8,2==j.value.defaultValue]]),(0,i.wy)((0,i._)("div",null,[(0,i.Wm)(te,{modelValue:j.value.defaulted,"onUpdate:modelValue":l[7]||(l[7]=e=>j.value.defaulted=e),type:"datetime",format:"YYYY-MM-DD hh:mm:ss","value-format":"YYYY-MM-DD hh:mm:ss",placeholder:"选择默认时间"},null,8,["modelValue"])],512),[[u.F8,1==j.value.defaultValue]]),(0,i.wy)((0,i._)("span",null,"无",512),[[u.F8,0==j.value.defaultValue]])])),_:1},512),[[u.F8,1!=j.value.status||1==m.value]])])),_:1},8,["model"])])),_:1},8,["modelValue"]),(0,i.Wm)(re,{modelValue:D.value,title:"添加副数据表",width:"30%",onClose:Z},{footer:(0,i.w5)((()=>[(0,i._)("span",d,[(0,i.Wm)(M,{type:"primary",onClick:X},{default:(0,i.w5)((()=>[(0,i.Uk)("确认")])),_:1})])])),default:(0,i.w5)((()=>[(0,i.Wm)(J,{label:"选副数据择表",style:{width:"300px"}},{default:(0,i.w5)((()=>[(0,i.Wm)(z,{modelValue:F.value.dataSources,"onUpdate:modelValue":l[8]||(l[8]=e=>F.value.dataSources=e),props:(0,t.SU)(V),onChange:l[9]||(l[9]=e=>ue(e,a.index))},null,8,["modelValue","props"])])),_:1}),(0,i.Wm)(J,{label:"选择join字段",style:{width:"300px"}},{default:(0,i.w5)((()=>[(0,i.Wm)(r,{ref:B,modelValue:F.value.join,"onUpdate:modelValue":l[10]||(l[10]=e=>F.value.join=e),clearable:""},{default:(0,i.w5)((()=>[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(F.value.joinFieldList,(e=>((0,i.wg)(),(0,i.j4)(o,{key:e.name,label:e.name,value:e.name},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),(0,i.Wm)(J,{label:"选择查询字段",style:{width:"300px"}},{default:(0,i.w5)((()=>[(0,i.Wm)(r,{ref:B,modelValue:F.value.query,"onUpdate:modelValue":l[11]||(l[11]=e=>F.value.query=e),"popper-append-to-body":!0,clearable:""},{default:(0,i.w5)((()=>[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(w.value,(e=>((0,i.wg)(),(0,i.j4)(o,{key:e.name,label:e.name,value:e.name},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1})])),_:1},8,["modelValue"]),(0,i.Wm)(re,{modelValue:q.value,title:"设置查询条件",width:"50%",onClose:$},{footer:(0,i.w5)((()=>[(0,i._)("span",f,[(0,i.Wm)(M,{type:"primary",onClick:Q},{default:(0,i.w5)((()=>[(0,i.Uk)("确认")])),_:1})])])),default:(0,i.w5)((()=>[(0,i.Wm)(J,{label:"选择表"},{default:(0,i.w5)((()=>[(0,i.Wm)(r,{modelValue:h.value.name,"onUpdate:modelValue":l[12]||(l[12]=e=>h.value.name=e),"popper-append-to-body":!0,clearable:""},{default:(0,i.w5)((()=>[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(N.value,(e=>((0,i.wg)(),(0,i.j4)(o,{key:"选择主数据表"==e.name?e.name:e.uniqueName+"/"+e.name+"/"+e.field,label:"选择主数据表"==e.name?e.name:e.uniqueName+"/"+e.name+"/"+e.field,value:"选择主数据表"==e.name?e.name:e.uniqueName+"/"+e.name+"/"+e.field},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(b.value,(e=>((0,i.wg)(),(0,i.j4)(J,{label:"字段"},{default:(0,i.w5)((()=>[(0,i.Wm)(_,{span:8},{default:(0,i.w5)((()=>[(0,i.Wm)(r,{ref_for:!0,ref:B,modelValue:e.field,"onUpdate:modelValue":a=>e.field=a,disabled:"last"==e.query,"popper-append-to-body":!0,clearable:""},{default:(0,i.w5)((()=>[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(h.value.list,(e=>((0,i.wg)(),(0,i.j4)(o,{key:e.name,label:e.name,value:e.name},null,8,["label","value"])))),128))])),_:2},1032,["modelValue","onUpdate:modelValue","disabled"])])),_:2},1024),(0,i.Wm)(_,{span:4},{default:(0,i.w5)((()=>[(0,i.Wm)(r,{ref_for:!0,ref:B,modelValue:e.query,"onUpdate:modelValue":a=>e.query=a,style:{width:"80px"},placeholder:" ",clearable:""},{default:(0,i.w5)((()=>[((0,i.wg)(),(0,i.iD)(i.HY,null,(0,i.Ko)(S,(e=>(0,i.Wm)(o,{key:e,label:e,value:e},null,8,["label","value"]))),64))])),_:2},1032,["modelValue","onUpdate:modelValue"])])),_:2},1024),(0,i.Wm)(_,{span:1},{default:(0,i.w5)((()=>[v])),_:1}),(0,i.Wm)(_,{span:8},{default:(0,i.w5)((()=>[(0,i.wy)((0,i.Wm)(me,{content:"多个值用英文逗号隔开",placement:"left","auto-close":"2000",effect:"light"},{default:(0,i.w5)((()=>[p])),_:1},512),[[u.F8]]),(0,i.wy)((0,i.Wm)(P,{style:{height:"35px",width:"200px"},modelValue:e.value,"onUpdate:modelValue":a=>e.value=a},null,8,["modelValue","onUpdate:modelValue"]),[[u.F8,C(e.field)]]),C(e.field)?(0,i.kq)("",!0):((0,i.wg)(),(0,i.j4)(te,{key:0,modelValue:e.value,"onUpdate:modelValue":a=>e.value=a,type:"datetime",format:"YYYY-MM-DD hh:mm:ss","value-format":"YYYY-MM-DD hh:mm:ss",placeholder:"选择默认时间"},null,8,["modelValue","onUpdate:modelValue"]))])),_:2},1024),(0,i.Wm)(M,{type:"primary",onClick:G,plain:""},{default:(0,i.w5)((()=>[(0,i.Uk)("+")])),_:1}),(0,i.Wm)(M,{type:"danger",onClick:a=>A(e),plain:""},{default:(0,i.w5)((()=>[(0,i.Uk)("-")])),_:2},1032,["onClick"])])),_:2},1024)))),256))])),_:1},8,["modelValue"])],64)}}},g=l(89);const T=(0,g.Z)(c,[["__scopeId","data-v-feffbeb8"]]);var y=T}}]);
//# sourceMappingURL=79.d70ffdf3.js.map