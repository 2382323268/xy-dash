{"version":3,"file":"js/293.e73cc709.js","mappings":"qiBA0HA,MAAMA,GAAQC,EAAAA,EAAAA,IAAI,GACZC,GAAYD,EAAAA,EAAAA,IAAI,MAEhBE,IADgBF,EAAAA,EAAAA,KAAI,IACLA,EAAAA,EAAAA,KAAI,IAGnBG,IAFcH,EAAAA,EAAAA,IAAI,KACbA,EAAAA,EAAAA,KAAK,IACDA,EAAAA,EAAAA,IAAI,OAEbI,IADiBJ,EAAAA,EAAAA,KAAI,IACdA,EAAAA,EAAAA,KAAI,IACXK,GAAWL,EAAAA,EAAAA,KAAK,GAEhBM,EAAeC,UACnB,MAAMC,QAAYC,EAAAA,GAAAA,IAAgB,0BAA2BC,EAAUC,OACvEV,EAAUU,MAAQH,EAAII,KAAKA,KAAKC,QAChCd,EAAMY,MAAQH,EAAII,KAAKA,KAAKb,KAAK,EAE7Be,EAAqBC,IACzBC,EAAAA,EAAAA,KAAY,CACVC,KAAM,SACNC,OAAQ,CAAEC,GAAIJ,IACd,EAEEK,EAAab,gBACCE,EAAAA,GAAAA,KAChB,2BAA6BJ,EAASM,MAAQ,WAEhDT,EAAaS,OAAQ,EACrBL,GAAc,EAEVe,EAAWd,gBACGE,EAAAA,GAAAA,KAChB,2BACEJ,EAASM,MACT,0BACAR,EAAOQ,OAEXP,EAAKO,OAAQ,EACbN,EAASM,OAAS,EAClBR,EAAOQ,MAAQ,GACfL,IACAgB,EAAAA,GAAAA,QAAkB,QAAQ,EAEtBC,EAAoBC,IACxBd,EAAUC,MAAMc,QAAU,EAC1Bf,EAAUC,MAAMa,KAAOA,EACvBlB,GAAc,EAEVoB,EAAuBC,IAC3B,IAAIC,EAAW,KAGf,OADoBA,EAApBD,EAAKE,YAA0BF,EAAKE,YAA2B,EACxDD,CAAQ,EAEXE,EAAuBL,IAC3Bf,EAAUC,MAAMc,QAAUA,EAC1BnB,GAAc,EAEVI,GAAYV,EAAAA,EAAAA,IAAI,CACpBiB,KAAM,GACNQ,QAAS,EACTD,KAAM,K,OAERlB,I,ymHClLA,MAAMyB,GAA2B,OAAgB,EAAQ,CAAC,CAAC,YAAY,qBAEvE,O","sources":["webpack://xy-dash-admin/./src/views/config/migration/index.vue","webpack://xy-dash-admin/./src/views/config/migration/index.vue?301a"],"sourcesContent":["<template>\r\n  <el-row :gutter=\"20\" class=\"header\">\r\n    <el-col :span=\"4\">\r\n      <el-input\r\n        placeholder=\"请输入数据源名称...\"\r\n        v-model=\"queryForm.name\"\r\n        clearable\r\n        style=\"height: 35px\"\r\n      ></el-input>\r\n    </el-col>\r\n    <el-button type=\"primary\" @click=\"initUserList\">搜索</el-button>\r\n    <el-button color=\"#008997\" type=\"success\" @click=\"handleDialogValue('add')\"\r\n      >添加</el-button\r\n    >\r\n  </el-row>\r\n  <el-table :data=\"tableData\" stripe style=\"width: 100%\">\r\n    <el-table-column type=\"selection\" width=\"55\" />\r\n    <el-table-column prop=\"name\" label=\"名称\" width=\"150\" align=\"center\" />\r\n    <el-table-column\r\n      prop=\"port\"\r\n      label=\"启动端口号\"\r\n      width=\"150\"\r\n      align=\"center\"\r\n    />\r\n    <el-table-column prop=\"count\" label=\"每轮条数\" width=\"180\" align=\"center\" />\r\n    <el-table-column\r\n      prop=\"threadCount\"\r\n      label=\"线程数量\"\r\n      :formatter=\"problemSourceFormat\"\r\n      align=\"center\"\r\n      width=\"150\"\r\n    />\r\n    <el-table-column prop=\"isDel\" label=\"是否删除\" width=\"180\" align=\"center\">\r\n      <template v-slot=\"scope\">\r\n        <span v-if=\"scope.row.isDel\">是</span>\r\n        <span v-if=\"!scope.row.isDel\">否</span>\r\n      </template>\r\n    </el-table-column>\r\n    <el-table-column\r\n      prop=\"sqlSpliec\"\r\n      label=\"是否sql拼接\"\r\n      width=\"150\"\r\n      align=\"center\"\r\n    >\r\n      <template v-slot=\"scope\">\r\n        <span v-if=\"scope.row.sqlSpliec\">是</span>\r\n        <span v-if=\"!scope.row.sqlSpliec\">否</span>\r\n      </template>\r\n    </el-table-column>\r\n    <el-table-column\r\n      prop=\"startThread\"\r\n      label=\"是否开启线程\"\r\n      align=\"center\"\r\n      width=\"150\"\r\n    >\r\n      <template v-slot=\"scope\">\r\n        <span v-if=\"scope.row.startThread\">是</span>\r\n        <span v-if=\"!scope.row.startThread\">否</span>\r\n      </template>\r\n    </el-table-column>\r\n    <el-table-column prop=\"data\" label=\"操作\" align=\"center\">\r\n      <template v-slot=\"scope\">\r\n        <span\r\n          class=\"text\"\r\n          @click=\"\r\n            deleteId = scope.row.id;\r\n            code = true;\r\n          \"\r\n          >生成</span\r\n        >\r\n        <span class=\"text\" @click=\"handleDialogValue(scope.row.id)\">编辑</span>\r\n        <span\r\n          class=\"text\"\r\n          @click=\"\r\n            deleteId = scope.row.id;\r\n            dialogDelete = true;\r\n          \"\r\n          >删除</span\r\n        >\r\n      </template>\r\n    </el-table-column>\r\n  </el-table>\r\n\r\n  <el-pagination\r\n    v-model:currentPage=\"queryForm.current\"\r\n    v-model:page-size=\"queryForm.size\"\r\n    :page-sizes=\"[10, 20, 30, 40, 50]\"\r\n    layout=\"total, sizes, prev, pager, next, jumper\"\r\n    :total=\"total\"\r\n    @size-change=\"handleSizeChange\"\r\n    @current-change=\"handleCurrentChange\"\r\n  />\r\n\r\n  <el-dialog v-model=\"dialogDelete\" title=\"提示\" width=\"30%\">\r\n    <span style=\"font-size: larger\">您确定要删除这条记录吗？</span>\r\n    <template #footer>\r\n      <span class=\"dialog-footer\">\r\n        <el-button @click=\"dialogDelete = false\">取消</el-button>\r\n        <el-button type=\"primary\" @click=\"deleteById()\"> 确认 </el-button>\r\n      </span>\r\n    </template>\r\n  </el-dialog>\r\n  <el-dialog v-model=\"code\" title=\"生成代码\" width=\"20%\">\r\n    <el-form label-width=\"50px\" stripe style=\"width: 260px\">\r\n      <el-form-item label=\"备注\"\r\n        ><el-input v-model=\"remark\" clearable></el-input></el-form-item\r\n    ></el-form>\r\n    <template #footer>\r\n      <span class=\"dialog-footer\">\r\n        <el-button @click=\"code = false\">取消</el-button>\r\n        <el-button type=\"primary\" @click=\"codeById()\"> 确认 </el-button>\r\n      </span>\r\n    </template>\r\n  </el-dialog>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, watch } from \"vue\";\r\nimport requestUtil from \"@/util/request\";\r\nimport router from \"@/router/index\";\r\nimport { ElMessage } from \"element-plus\";\r\n\r\nconst total = ref(0);\r\nconst tableData = ref(null);\r\nconst dialogVisible = ref(false);\r\nconst dialogDelete = ref(false);\r\nconst dialogTitle = ref(\"\");\r\nconst id = ref(-1);\r\nconst remark = ref(null);\r\nconst connectLoading = ref(false);\r\nconst code = ref(false);\r\nconst deleteId = ref(-1);\r\n\r\nconst initUserList = async () => {\r\n  const res = await requestUtil.get(\"admin_api/v1/migrations\", queryForm.value);\r\n  tableData.value = res.data.data.records;\r\n  total.value = res.data.data.total;\r\n};\r\nconst handleDialogValue = (rowId) => {\r\n  router.push({\r\n    name: \"数据迁移操作\",\r\n    params: { id: rowId },\r\n  });\r\n};\r\nconst deleteById = async () => {\r\n  const res = await requestUtil.post(\r\n    \"admin_api/v1/migrations/\" + deleteId.value + \"/delete\"\r\n  );\r\n  dialogDelete.value = false;\r\n  initUserList();\r\n};\r\nconst codeById = async () => {\r\n  const res = await requestUtil.post(\r\n    \"admin_api/v1/migrations/\" +\r\n      deleteId.value +\r\n      \"/generatingCode?remark=\" +\r\n      remark.value\r\n  );\r\n  code.value = false;\r\n  deleteId.value = -1;\r\n  remark.value = \"\";\r\n  initUserList();\r\n  ElMessage.success(\"操作成功！\");\r\n};\r\nconst handleSizeChange = (size) => {\r\n  queryForm.value.current = 1;\r\n  queryForm.value.size = size;\r\n  initUserList();\r\n};\r\nconst problemSourceFormat = (date) => {\r\n  let showProp = null;\r\n\r\n  date.threadCount ? (showProp = date.threadCount) : (showProp = 0);\r\n  return showProp;\r\n};\r\nconst handleCurrentChange = (current) => {\r\n  queryForm.value.current = current;\r\n  initUserList();\r\n};\r\nconst queryForm = ref({\r\n  name: \"\",\r\n  current: 1,\r\n  size: 10,\r\n});\r\ninitUserList();\r\n</script>\r\n\r\n<style scoped>\r\n.header {\r\n  padding-bottom: 16px;\r\n  box-sizing: border-box;\r\n}\r\n.text {\r\n  cursor: pointer;\r\n  font-size: 0.8rem;\r\n  font-weight: 550;\r\n  background-size: 40px 40px;\r\n  margin: 5px;\r\n  color: #09909f;\r\n}\r\n\r\n.el-pagination {\r\n  float: right;\r\n  padding: 20px;\r\n  box-sizing: border-box;\r\n}\r\n\r\n::v-deep th.el-table__cell {\r\n  word-break: break-word;\r\n  background-color: #f8f8f9 !important;\r\n  color: #515a6e;\r\n  height: 40px;\r\n  font-size: 13px;\r\n}\r\n\r\n.el-tag--small {\r\n  margin-left: 5px;\r\n}\r\n.ccc {\r\n  background-size: 20px 20px !important;\r\n  width: 20px !important;\r\n  height: 20px !important;\r\n}\r\n</style>\r\n","import script from \"./index.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./index.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./index.vue?vue&type=style&index=0&id=657fe010&scoped=true&lang=css\"\n\nimport exportComponent from \"D:\\\\bs\\\\wxw\\\\xy-dash-admin\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-657fe010\"]])\n\nexport default __exports__"],"names":["total","ref","tableData","dialogDelete","remark","code","deleteId","initUserList","async","res","requestUtil","queryForm","value","data","records","handleDialogValue","rowId","router","name","params","id","deleteById","codeById","ElMessage","handleSizeChange","size","current","problemSourceFormat","date","showProp","threadCount","handleCurrentChange","__exports__"],"sourceRoot":""}