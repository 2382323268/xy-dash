{"version":3,"file":"js/0.725f6ab0.js","mappings":"gcAmFA,MAAMA,GAAQC,EAAAA,EAAAA,IAAI,GACZC,GAAWD,EAAAA,EAAAA,IAAI,MACfE,GAASF,EAAAA,EAAAA,IAAI,MAEbG,IADKH,EAAAA,EAAAA,KAAK,IACMA,EAAAA,EAAAA,IAAI,KACpBI,GAAeJ,EAAAA,EAAAA,KAAI,GACnBK,GAAUL,EAAAA,EAAAA,KAAI,GAGdM,IAFWN,EAAAA,EAAAA,KAAK,GAEKO,IACzBC,EAAAA,EAAAA,KAAY,CACVC,KAAM,SACNC,OAAQ,CAAEC,GAAIJ,IACd,GAEEK,EAAeC,UACnB,MAAMC,QAAYC,EAAAA,GAAAA,IAChB,uCACAC,EAAUC,OAEZhB,EAASgB,MAAQH,EAAII,KAAKA,KAAKC,QAC/BpB,EAAMkB,MAAQH,EAAII,KAAKA,KAAKnB,KAAK,EAE7BqB,EAAmBP,UACvB,MAAMC,QAAYC,EAAAA,GAAAA,IAAgB,oCAClCZ,EAAcc,MAAQH,EAAII,KAAKA,IAAI,EAErCE,IACA,MAAMC,EAAoBC,IACxBN,EAAUC,MAAMM,QAAU,EAC1BP,EAAUC,MAAMK,KAAOA,EACvBV,GAAc,EAGVY,EAAuBC,GACR,KAAfA,EAAKC,OACA,OAEU,KAAfD,EAAKC,OACA,OAEU,KAAfD,EAAKC,OACA,OAEU,KAAfD,EAAKC,OACA,QAEU,KAAfD,EAAKC,OACA,WADT,EAIIC,EAAuBJ,IAC3BP,EAAUC,MAAMM,QAAUA,EAC1BX,GAAc,EAEVI,GAAYhB,EAAAA,EAAAA,IAAI,CACpBS,KAAM,GACNc,QAAS,EACTD,KAAM,K,OAERV,I,igGCzIA,MAAMgB,GAA2B,OAAgB,EAAQ,CAAC,CAAC,YAAY,qBAEvE,O","sources":["webpack://xy-dash-admin/./src/views/code/run/index.vue","webpack://xy-dash-admin/./src/views/code/run/index.vue?cacb"],"sourcesContent":["<template>\r\n  <el-row :gutter=\"20\" class=\"header\">\r\n    <el-col :span=\"9\">\r\n      <el-form label-width=\"120px\">\r\n        <el-form-item label=\"文件名称:\">\r\n          <el-select\r\n            class=\"m-2\"\r\n            v-model=\"queryForm.codeId\"\r\n            :popper-append-to-body=\"true\"\r\n            clearable\r\n          >\r\n            <el-option\r\n              v-for=\"item in migrationList\"\r\n              :key=\"item.id\"\r\n              :label=\"item.fileName\"\r\n              :value=\"item.id\"\r\n            />\r\n          </el-select>\r\n          <el-col :span=\"1\">\r\n            <el-button type=\"primary\" @click=\"initUserList\">搜索</el-button>\r\n          </el-col>\r\n        </el-form-item>\r\n      </el-form>\r\n    </el-col>\r\n  </el-row>\r\n  <el-table :data=\"codeData\" stripe style=\"width: 100%\">\r\n    <el-table-column prop=\"fileName\" label=\"文件名称\" align=\"center\" />\r\n    <el-table-column\r\n      prop=\"status\"\r\n      label=\"状态\"\r\n      :formatter=\"problemSourceFormat\"\r\n      align=\"center\"\r\n    />\r\n\r\n    <el-table-column prop=\"remark\" label=\"备注\" align=\"center\" />\r\n    <el-table-column prop=\"createdTime\" label=\"创建时间\" align=\"center\" />\r\n    <el-table-column prop=\"creater\" label=\"创建人\" align=\"center\" />\r\n    <el-table-column prop=\"data\" label=\"操作\" align=\"center\">\r\n      <template v-slot=\"scope\">\r\n        <span class=\"text\" @click=\"handleDialogValue(scope.row.id)\">详情</span>\r\n      </template>\r\n    </el-table-column>\r\n  </el-table>\r\n\r\n  <el-pagination\r\n    v-model:currentPage=\"queryForm.current\"\r\n    v-model:page-size=\"queryForm.size\"\r\n    :page-sizes=\"[10, 20, 30, 40, 50]\"\r\n    layout=\"total, sizes, prev, pager, next, jumper\"\r\n    :total=\"total\"\r\n    @size-change=\"handleSizeChange\"\r\n    @current-change=\"handleCurrentChange\"\r\n  />\r\n\r\n  <el-dialog v-model=\"dialogDelete\" title=\"提示\" width=\"30%\">\r\n    <span style=\"font-size: larger\">您确定要删除这条记录吗？</span>\r\n    <template #footer>\r\n      <span class=\"dialog-footer\">\r\n        <el-button @click=\"dialogDelete = false\">取消</el-button>\r\n        <el-button type=\"primary\" @click=\"deleteById()\"> 确认 </el-button>\r\n      </span>\r\n    </template>\r\n  </el-dialog>\r\n  <el-dialog v-model=\"runShow\" title=\"运行代码\" width=\"20%\">\r\n    <el-form label-width=\"50px\" stripe style=\"width: 260px\">\r\n      <el-form-item label=\"备注\"\r\n        ><el-input v-model=\"remark\" clearable></el-input></el-form-item\r\n    ></el-form>\r\n    <template #footer>\r\n      <span class=\"dialog-footer\">\r\n        <el-button @click=\"code = false\">取消</el-button>\r\n        <el-button type=\"primary\" @click=\"run()\"> 确认 </el-button>\r\n      </span>\r\n    </template>\r\n  </el-dialog>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, watch } from \"vue\";\r\nimport requestUtil from \"@/util/request\";\r\nimport router from \"@/router/index\";\r\nimport { ElMessage } from \"element-plus\";\r\n\r\nconst total = ref(0);\r\nconst codeData = ref(null);\r\nconst remark = ref(null);\r\nconst id = ref(-1);\r\nconst migrationList = ref([]);\r\nconst dialogDelete = ref(false);\r\nconst runShow = ref(false);\r\nconst deleteId = ref(-1);\r\n\r\nconst handleDialogValue = (rowId) => {\r\n  router.push({\r\n    name: \"运行记录详情\",\r\n    params: { id: rowId },\r\n  });\r\n};\r\nconst initUserList = async () => {\r\n  const res = await requestUtil.get(\r\n    \"admin_api/v1/migrationCodeOperations\",\r\n    queryForm.value\r\n  );\r\n  codeData.value = res.data.data.records;\r\n  total.value = res.data.data.total;\r\n};\r\nconst getMigrationList = async () => {\r\n  const res = await requestUtil.get(\"admin_api/v1/migrationCodes/list\");\r\n  migrationList.value = res.data.data;\r\n};\r\ngetMigrationList();\r\nconst handleSizeChange = (size) => {\r\n  queryForm.value.current = 1;\r\n  queryForm.value.size = size;\r\n  initUserList();\r\n};\r\n\r\nconst problemSourceFormat = (date) => {\r\n  if (date.status == \"0\") {\r\n    return \"运行失败\";\r\n  }\r\n  if (date.status == \"1\") {\r\n    return \"运行成功\";\r\n  }\r\n  if (date.status == \"2\") {\r\n    return \"开始执行\";\r\n  }\r\n  if (date.status == \"3\") {\r\n    return \"生成jar\";\r\n  }\r\n  if (date.status == \"4\") {\r\n    return \"运行中\";\r\n  }\r\n};\r\nconst handleCurrentChange = (current) => {\r\n  queryForm.value.current = current;\r\n  initUserList();\r\n};\r\nconst queryForm = ref({\r\n  name: \"\",\r\n  current: 1,\r\n  size: 10,\r\n});\r\ninitUserList();\r\n</script>\r\n\r\n<style scoped>\r\n.header {\r\n  padding-bottom: 16px;\r\n  box-sizing: border-box;\r\n}\r\n.text {\r\n  cursor: pointer;\r\n  font-size: 0.8rem;\r\n  font-weight: 550;\r\n  background-size: 40px 40px;\r\n  margin: 5px;\r\n  color: #09909f;\r\n}\r\n.m-2 {\r\n  width: 200px;\r\n}\r\n.el-pagination {\r\n  float: right;\r\n  padding: 20px;\r\n  box-sizing: border-box;\r\n}\r\n\r\n::v-deep th.el-table__cell {\r\n  word-break: break-word;\r\n  background-color: #f8f8f9 !important;\r\n  color: #515a6e;\r\n  height: 40px;\r\n  font-size: 13px;\r\n}\r\n\r\n.el-tag--small {\r\n  margin-left: 5px;\r\n}\r\n.ccc {\r\n  background-size: 20px 20px !important;\r\n  width: 20px !important;\r\n  height: 20px !important;\r\n}\r\n</style>\r\n","import script from \"./index.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./index.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./index.vue?vue&type=style&index=0&id=4a3febe9&scoped=true&lang=css\"\n\nimport exportComponent from \"D:\\\\bs\\\\wxw\\\\xy-dash-admin\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-4a3febe9\"]])\n\nexport default __exports__"],"names":["total","ref","codeData","remark","migrationList","dialogDelete","runShow","handleDialogValue","rowId","router","name","params","id","initUserList","async","res","requestUtil","queryForm","value","data","records","getMigrationList","handleSizeChange","size","current","problemSourceFormat","date","status","handleCurrentChange","__exports__"],"sourceRoot":""}